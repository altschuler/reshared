fragment UserCard on users {
    id
    name
    image
}

fragment UserDetail on users {
    ...UserCard
    created_at
}

fragment UserJoinRequests on users {
    id
    group_join_requests(where: { status: { _eq: pending } }) {
        ...GroupJoinRequestCard
    }
}

fragment UserPrivateDetail on users {
    ...UserDetail
    ...UserJoinRequests

    memberships {
        id
        role
        group {
            ...GroupCard
        }
    }

    private_info {
        email
    }
}

query UserList {
    users {
        ...UserCard
    }
}

query UserPrivateDetails($id: uuid!) {
    users_by_pk(id: $id) {
        ...UserPrivateDetail
    }
}

mutation RegisterUser($input: CredentialsInput!) {
    registerCredentials(input: $input) {
        user {
            ...UserCard
        }
    }
}
